(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{192:function(e,t,a){},193:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var r=a(0),i=a.n(r),n=a(55),c=a.n(n),s=(a(192),a(193),a(38)),o=a(46),l=a.n(o),j=a(63),d=a(394),u=a(387),h=a(370),b=a(375),x=a(388),O=a(41),p="localhost"===window.location.hostname.split(":")[0]?"http://localhost:5000":"",m=a(18),v=a(1),g=s.a({email:s.b("Enter your email").email("Enter a valid email").required("Email is required"),password:s.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required"),name:s.b("Enter your name").required("Name is required")});function f(){var e=Object(m.f)(),t=Object(j.a)({validationSchema:g,initialValues:{name:"",email:"",password:""},onSubmit:function(t,a){a.resetForm;l.a.post("".concat(p,"/api/v1/signup"),{name:t.name,email:t.email,password:t.password}).then((function(t){console.log("res: ",t.data),t.data&&e.push("/login")}))}});return Object(v.jsx)("div",{className:"SignUpMain",children:Object(v.jsx)(d.a,{sx:{marginTop:"5%"},children:Object(v.jsxs)(u.a,{sx:{p:5,margin:"auto",maxWidth:500,flexGrow:1},children:[Object(v.jsx)("h1",{children:" Sign Up"}),Object(v.jsx)("form",{onSubmit:t.handleSubmit,children:Object(v.jsxs)(h.a,{spacing:2,children:[Object(v.jsx)(b.a,{fullWidth:!0,color:"primary",id:"name",label:"Name",variant:"outlined",name:"name",value:t.values.name,onChange:t.handleChange,error:t.touched.name&&Boolean(t.errors.name),helperText:t.touched.name&&t.errors.name}),Object(v.jsx)(b.a,{fullWidth:!0,color:"primary",id:"email",label:"Email",variant:"outlined",name:"email",value:t.values.email,onChange:t.handleChange,error:t.touched.email&&Boolean(t.errors.email),helperText:t.touched.email&&t.errors.email}),Object(v.jsx)(b.a,{fullWidth:!0,color:"primary",id:"password",label:"Password",variant:"outlined",type:"password",name:"password",value:t.values.password,onChange:t.handleChange,error:t.touched.password&&Boolean(t.errors.password),helperText:t.touched.password&&t.errors.password}),Object(v.jsx)(x.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Sign Up"}),Object(v.jsx)(O.b,{to:"/login",children:"Already Have an Account? Login"})]})})]})})})}var w=a(12),y=a(379);function S(e){return Object(v.jsx)(h.a,{sx:{width:"100%",position:"absolute"},spacing:2,children:Object(v.jsx)(y.a,{severity:e.type,children:e.message})})}var C=a(56),E=function(e,t){switch(t.type){case"USER_LOGIN":return t.payload.name&&t.payload.email&&t.payload._id?(console.log("CurrentUser ==>",t.payload),Object(C.a)(Object(C.a)({},e),{},{user:t.payload})):(console.log("invalid data in USER_LOGIN reducer ",t.payload),e);case"USER_LOGOUT":return Object(C.a)(Object(C.a)({},e),{},{user:null});default:return e}},T=Object(r.createContext)("Initial Value"),P={user:void 0};function G(e){var t=e.children,a=Object(r.useReducer)(E,P),i=Object(w.a)(a,2),n=i[0],c=i[1];return Object(v.jsx)(T.Provider,{value:{state:n,dispatch:c},children:t})}var q=s.a({email:s.b("Enter your email").email("Enter a valid email").required("Email is required"),password:s.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required")});function L(){var e=Object(r.useContext)(T).dispatch,t=Object(m.f)(),a=Object(r.useState)(""),i=Object(w.a)(a,2),n=i[0],c=i[1],s=Object(j.a)({validationSchema:q,initialValues:{email:"",password:""},onSubmit:function(a){l.a.post("".concat(p,"/api/v1/login"),{email:a.email,password:a.password}).then((function(a){"error"!==a.data?(console.log(a.data),e({type:"USER_LOGIN",payload:{name:a.data.name,email:a.data.email,_id:a.data._id,created:a.data.created}}),c(!0),setTimeout((function(){t.push("/profile"),c([])}),1e3)):(c(!1),setTimeout((function(){c([])}),1e3))}))}});return Object(v.jsxs)("div",{className:"LoginMain",children:[!0===n?Object(v.jsx)(S,{type:"success",message:"Welcome"}):"",!1===n?Object(v.jsx)(S,{type:"error",message:"Invalid email or password"}):"",Object(v.jsx)(d.a,{sx:{marginTop:"5%"},children:Object(v.jsxs)(u.a,{sx:{p:5,margin:"auto",maxWidth:500,flexGrow:1},children:[Object(v.jsx)("h1",{children:" Log In"}),Object(v.jsx)("form",{onSubmit:s.handleSubmit,children:Object(v.jsxs)(h.a,{spacing:2,children:[Object(v.jsx)(b.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Email",variant:"outlined",name:"email",value:s.values.email,onChange:s.handleChange,error:s.touched.email&&Boolean(s.errors.email),helperText:s.touched.email&&s.errors.email}),Object(v.jsx)(b.a,{fullWidth:!0,color:"primary",id:"filled-basic",label:"Password",variant:"outlined",type:"password",name:"password",value:s.values.password,onChange:s.handleChange,error:s.touched.password&&Boolean(s.errors.password),helperText:s.touched.password&&s.errors.password}),Object(v.jsx)(x.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Log In"}),Object(v.jsx)(O.b,{to:"/signup",children:"Don't Have an Account? SignUp"})]})})]})})]})}var U=a(392),W=a(390),k=a(393),B=a(391),_=a(389),N=a(5),A=a(380),I=a(395),D=a(382),F=a(397),M=a(398),z=a(167),R=a.n(z),V=a(166),H=a.n(V),J=a(168),K=a.n(J),X=a(396),Q=a(384);function Y(){var e=Object(r.useContext)(T),t=e.state;e.dispatch;console.log("Profile==>",t);var a,n=i.a.useState({left:!1}),c=Object(w.a)(n,2),s=c[0],o=c[1],l=function(e,t){return function(a){(!a||"keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&o(Object(C.a)(Object(C.a)({},s),{},Object(N.a)({},e,t)))}};return Object(v.jsx)("div",{children:Object(v.jsxs)(i.a.Fragment,{children:[Object(v.jsx)(x.a,{color:"inherit",onClick:l("left",!0),children:"Profile"}),Object(v.jsx)(A.a,{anchor:"left",open:s.left,onClose:l("left",!1),onOpen:l("left",!0),children:(a="left",Object(v.jsxs)(W.a,{sx:{width:300},role:"presentation",onClick:l(a,!1),onKeyDown:l(a,!1),children:[Object(v.jsx)(I.a,{children:Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Q.a,{alt:"User",sx:{width:56,height:56},src:"https://media-exp1.licdn.com/dms/image/C5103AQGAb_GYoLFM7A/profile-displayphoto-shrink_200_200/0/1564347397659?e=1639612800&v=beta&t=1zAw1iPqsETqK7DUN2nXvydn8wnz8n26I1pMPXUP0_c"}),Object(v.jsx)(B.a,{variant:"h6",gutterBottom:!0,component:"div",sx:{marginLeft:3,marginTop:1},children:t.user.name})]})}),Object(v.jsx)(X.a,{}),Object(v.jsxs)(I.a,{children:[Object(v.jsxs)(D.a,{button:!0,children:[Object(v.jsx)(F.a,{children:Object(v.jsx)(H.a,{})}),Object(v.jsx)(M.a,{primary:t.user.name})]},t.user.name),Object(v.jsxs)(D.a,{button:!0,children:[Object(v.jsx)(F.a,{children:Object(v.jsx)(R.a,{})}),Object(v.jsx)(M.a,{primary:t.user.email})]},t.user.email),Object(v.jsxs)(D.a,{button:!0,children:[Object(v.jsx)(F.a,{children:Object(v.jsx)(K.a,{})}),Object(v.jsx)(M.a,{primary:t.user.created})]},t.user.created)]}),Object(v.jsx)(X.a,{})]}))})]},"left")})}var Z=a(403),$=a(374),ee=a(377),te=a(381),ae=a(399),re=a(402),ie=a(401),ne=a(400),ce=a(61),se=a(385);function oe(e){return Object(v.jsx)("div",{children:Object(v.jsx)(se.a,{container:!0,spacing:2,sx:{flexGrow:1},justifyContent:"center",children:e.posts.map((function(e){return Object(v.jsx)(se.a,{item:!0,md:6,children:Object(v.jsxs)(ae.a,{sx:{maxWidth:"auto",height:"250px"},children:[Object(v.jsx)(ne.a,{avatar:Object(v.jsx)(Q.a,{sx:{bgcolor:ce.a[500]},"aria-label":"recipe",children:" A "}),title:e.user,subheader:e.created}),Object(v.jsx)(X.a,{}),Object(v.jsxs)(ie.a,{children:[Object(v.jsx)(B.a,{gutterBottom:!0,variant:"h5",component:"div",children:e.subject}),Object(v.jsx)(B.a,{variant:"body2",color:"text.secondary",children:e.description})]}),Object(v.jsxs)(re.a,{children:[Object(v.jsx)(x.a,{size:"small",children:"Share"}),Object(v.jsx)(x.a,{size:"small",children:"Learn More"})]})]})},e._id)}))})})}var le=a(386),je=s.a({subject:s.b("Enter your Subject").required("Email is required"),description:s.b("Enter your Description").required("Password is required")});var de=function(){var e=i.a.useState("1"),t=Object(w.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(T).state,s=Object(r.useState)(null),o=Object(w.a)(s,2),d=o[0],O=o[1],m=Object(r.useState)(!1),g=Object(w.a)(m,2),f=g[0],y=g[1],S=Object(r.useState)(null),C=Object(w.a)(S,2),E=C[0],P=C[1];Object(r.useEffect)((function(){return l.a.get("".concat(p,"/api/v1/post")).then((function(e){console.log("POSTS in DB ==>",e);var t=[];e.data.forEach((function(e){t.unshift(e)})),O([].concat(t));var a=t.filter((function(e){return e.email===c.user.email}));P(a)})),function(){}}),[f]);var G=Object(j.a)({validationSchema:je,initialValues:{subject:"",description:""},onSubmit:function(e){console.log(e),l.a.post("".concat(p,"/api/v1/post"),{user:c.user.name,email:c.user.email,subject:e.subject,description:e.description}).then((function(e){console.log("res: ",e.data),y(!f)}))}});return Object(v.jsxs)("div",{children:[Object(v.jsx)(W.a,{sx:{m:3},children:Object(v.jsx)(u.a,{elevation:3,sx:{p:5},children:Object(v.jsx)("form",{onSubmit:G.handleSubmit,children:Object(v.jsxs)(h.a,{spacing:2,children:[Object(v.jsx)(b.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Subject",variant:"outlined",name:"subject",value:G.values.subject,onChange:G.handleChange,error:G.touched.subject&&Boolean(G.errors.subject),helperText:G.touched.subject&&G.errors.subject}),Object(v.jsx)(b.a,{fullWidth:!0,multiline:!0,color:"primary",id:"outlined-basic",label:"Description",variant:"outlined",name:"description",rows:4,value:G.values.description,onChange:G.handleChange,error:G.touched.description&&Boolean(G.errors.description),helperText:G.touched.description&&G.errors.description}),Object(v.jsx)(x.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Post"})]})})})}),Object(v.jsx)(W.a,{sx:{width:"100%",typography:"body1"},children:Object(v.jsxs)($.a,{value:a,children:[Object(v.jsx)(W.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(v.jsxs)(ee.a,{onChange:function(e,t){n(t)},"aria-label":"lab API tabs example",centered:!0,children:[Object(v.jsx)(Z.a,{label:"News Feed",value:"1"}),Object(v.jsx)(Z.a,{label:"My Posts",value:"2"})]})}),Object(v.jsxs)(te.a,{value:"1",children:[d&&Object(v.jsx)(oe,{posts:d}),!d&&Object(v.jsx)("div",{children:Object(v.jsxs)(se.a,{container:!0,spacing:2,sx:{flexGrow:1},justifyContent:"center",children:[Object(v.jsx)(se.a,{item:!0,md:6,children:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(le.a,{variant:"text"}),Object(v.jsx)(le.a,{variant:"circular",width:40,height:40}),Object(v.jsx)(le.a,{variant:"rectangular",width:210,height:250})]})}),Object(v.jsx)(se.a,{item:!0,md:6,children:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(le.a,{variant:"text"}),Object(v.jsx)(le.a,{variant:"circular",width:40,height:40}),Object(v.jsx)(le.a,{variant:"rectangular",width:210,height:250})]})})]})})]}),Object(v.jsxs)(te.a,{value:"2",children:[E&&Object(v.jsx)(oe,{posts:E}),!E&&Object(v.jsx)("div",{children:Object(v.jsxs)(se.a,{container:!0,spacing:2,sx:{flexGrow:1},justifyContent:"center",children:[Object(v.jsx)(se.a,{item:!0,md:6,children:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(le.a,{variant:"text"}),Object(v.jsx)(le.a,{variant:"circular",width:40,height:40}),Object(v.jsx)(le.a,{variant:"rectangular",width:210,height:250})]})}),Object(v.jsx)(se.a,{item:!0,md:6,children:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(le.a,{variant:"text"}),Object(v.jsx)(le.a,{variant:"circular",width:40,height:40}),Object(v.jsx)(le.a,{variant:"rectangular",width:210,height:250})]})})]})})]})]})})]})};function ue(){var e=Object(m.f)(),t=Object(r.useContext)(T),a=t.state,i=t.dispatch;console.log("State in Profile Page",a);var n=Object(r.useState)(""),c=Object(w.a)(n,2),s=c[0],o=c[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)(W.a,{sx:{flexGrow:1},children:Object(v.jsx)(U.a,{position:"static",children:Object(v.jsxs)(k.a,{children:[Object(v.jsx)(_.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(v.jsx)(B.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Dashboard"}),Object(v.jsx)(Y,{}),Object(v.jsx)(x.a,{color:"inherit",onClick:function(){l.a.post("".concat(p,"/api/v1/logout"),{},{withCredentials:!0}).then((function(t){var r;(null===a||void 0===a||null===(r=a.user)||void 0===r?void 0:r.name)?(o(!0),setTimeout((function(){e.push("/"),i({type:"USER_LOGOUT",payload:null}),o([])}),1e3)):(o(!1),setTimeout((function(){o([])}),1e3))}))},children:"Logout"})]})})}),Object(v.jsx)(u.a,{variant:"outlined",children:Object(v.jsx)(de,{})}),!0===s?Object(v.jsx)(S,{type:"success",message:"Good bye!"}):"",!1===s?Object(v.jsx)(S,{type:"error",message:"Sorry! Something went wrong"}):""]})}function he(){var e=Object(m.f)();return Object(v.jsxs)("div",{children:[Object(v.jsx)(W.a,{sx:{flexGrow:1},children:Object(v.jsx)(U.a,{position:"static",children:Object(v.jsxs)(k.a,{children:[Object(v.jsx)(_.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}}),Object(v.jsx)(B.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(v.jsx)("span",{onClick:function(){return e.push("/")},style:{cursor:"pointer"},children:"Task Application"})}),Object(v.jsx)(x.a,{color:"inherit",onClick:function(){return e.push("/login")},children:"Login"}),Object(v.jsx)(x.a,{color:"inherit",onClick:function(){return e.push("/signup")},children:"Signup"})]})})}),Object(v.jsx)("h1",{children:"Welcome to the App , Navigate to proceed"})]})}var be=function(){return Object(v.jsx)("div",{children:Object(v.jsxs)(m.c,{children:[Object(v.jsx)(m.a,{path:"/login",children:Object(v.jsx)(L,{})}),Object(v.jsx)(m.a,{path:"/profile",children:Object(v.jsx)(ue,{})}),Object(v.jsx)(m.a,{exact:!0,path:"/signup",children:Object(v.jsx)(f,{})}),Object(v.jsx)(m.a,{exact:!0,path:"/",children:Object(v.jsx)(he,{})})]})})},xe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,405)).then((function(t){var a=t.getCLS,r=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),i(e),n(e),c(e)}))};c.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(G,{children:Object(v.jsx)(O.a,{children:Object(v.jsx)(be,{})})})}),document.getElementById("root")),xe()}},[[316,1,2]]]);
//# sourceMappingURL=main.71830f99.chunk.js.map